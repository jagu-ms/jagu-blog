(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(t,e,n){},37:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n.n(a),r=n(30),o=n.n(r),c=(n(36),n(6)),i=n(7),l=n(9),h=n(8),m=(n(37),n(2)),b=n(4),d=n.n(b),j=n(13),u=n(3),p=n(0),O=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).logout=a.logout.bind(Object(m.a)(a)),a}return Object(i.a)(n,[{key:"logout",value:function(){localStorage.removeItem("token"),localStorage.removeItem("id"),d.a.defaults.headers.common={Authorization:""},this.props.history.push("/")}},{key:"render",value:function(){return localStorage.getItem("token")?Object(p.jsxs)("div",{children:[Object(p.jsx)("nav",{className:"navbar navbar-expand bg-dark navbar-dark",children:Object(p.jsxs)("ul",{className:"navbar-nav",children:[Object(p.jsx)("li",{className:"nav-item ",children:Object(p.jsx)(j.b,{className:"nav-link",to:"/",children:"home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(j.b,{className:"nav-link",to:"/post/create",children:"create blog"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"#logout",className:"nav-link",onClick:this.logout,children:"logout"})})]})}),Object(p.jsx)("hr",{className:"border border-danger"})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)("nav",{className:"navbar navbar-expand bg-dark navbar-dark",children:Object(p.jsxs)("ul",{className:"navbar-nav",children:[Object(p.jsx)("li",{className:"nav-item ",children:Object(p.jsx)(j.b,{className:"nav-link",to:"/",children:"home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(j.b,{className:"nav-link",to:"/login",children:"login"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(j.b,{className:"nav-link",to:"/signup",children:"signup"})})]})}),Object(p.jsx)("hr",{className:"border border-danger"})]})}}]),n}(s.a.Component),v=Object(u.f)(O),g=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={posts:[],error:"",isLoading:!0},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"fetchPosts",value:function(){var t=this;d.a.get("api/posts").then((function(e){t.setState({posts:e.data,error:"",isLoading:!1})})).catch((function(e){t.setState({error:e.response.data.message,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?Object(p.jsx)("div",{className:"container text-center",children:Object(p.jsx)("h1",{children:"..."})}):this.state.error?Object(p.jsx)("div",{className:"container text-center",children:Object(p.jsxs)("h4",{children:['"',this.state.error,'"']})}):this.state.posts.length<1?Object(p.jsx)("div",{className:"container text-center",children:Object(p.jsx)("h4",{children:"no blogs"})}):this.state.posts.map((function(t){var e;return Object(p.jsx)("div",{className:"container pt-4",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col",children:[Object(p.jsx)("h4",{children:t.title}),Object(p.jsx)("h6",{className:"title",children:null===t||void 0===t||null===(e=t.author)||void 0===e?void 0:e.name}),Object(p.jsx)("p",{children:t.content.substr(0,50)}),Object(p.jsx)(j.b,{to:"/post/view/"+t._id,children:Object(p.jsx)("p",{className:"text-secondary",children:"more..."})}),Object(p.jsx)("hr",{className:"border border-danger"})]})})})}))}}]),n}(s.a.Component),x=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),a=e.call(this,t),localStorage.getItem("token")&&a.props.history.push("/"),a.onChangeEmail=a.onChangeEmail.bind(Object(m.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.state={email:"",password:"",error:""},a}return Object(i.a)(n,[{key:"onChangeEmail",value:function(t){this.setState({email:t.target.value,error:""})}},{key:"onChangePassword",value:function(t){this.setState({password:t.target.value,error:""})}},{key:"onSubmit",value:function(t){var e=this;t.preventDefault();var n={email:this.state.email,password:this.state.password};d.a.post("/api/auth",n).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("_id",t.data._id),d.a.defaults.headers.common={Authorization:t.data.token},e.props.history.push("/")})).catch((function(t){e.setState({error:t.response.data.message})}))}},{key:"renderError",value:function(){return this.state.error?Object(p.jsx)("blockquote",{children:this.state.error}):""}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container text-center form-width pt-2 ",children:[Object(p.jsx)("h4",{children:"Login"}),this.renderError(),Object(p.jsx)("br",{}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"email:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"email",value:this.state.email,onChange:this.onChangeEmail,className:"form-control mb-2 mr-sm-2",placeholder:"Enter email"}),Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"password:"}),Object(p.jsx)("input",{type:"password",value:this.state.password,onChange:this.onChangePassword,className:"form-control mb-2 mr-sm-2",placeholder:"Enter password"}),Object(p.jsx)("button",{type:"submit",className:"btn btn-outline-danger mb-2",children:"login"})]})})]})}}]),n}(s.a.Component),f=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),a=e.call(this,t),localStorage.getItem("token")&&a.props.history.push("/"),a.onChangeName=a.onChangeName.bind(Object(m.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(m.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.state={name:"",email:"",password:"",error:""},a}return Object(i.a)(n,[{key:"onChangeName",value:function(t){this.setState({name:t.target.value,error:""})}},{key:"onChangeEmail",value:function(t){this.setState({email:t.target.value,error:""})}},{key:"onChangePassword",value:function(t){this.setState({password:t.target.value,error:""})}},{key:"onSubmit",value:function(t){var e=this;t.preventDefault();var n={name:this.state.name,email:this.state.email,password:this.state.password};d.a.post("/api/signup",n).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("_id",t.data._id),d.a.defaults.headers.common={Authorization:t.data.token},e.props.history.push("/login")})).catch((function(t){e.setState({error:t.response.data.message})}))}},{key:"renderError",value:function(){return this.state.error?Object(p.jsx)("blockquote",{children:this.state.error}):""}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:" container text-center form-width pt-2",children:[Object(p.jsx)("h4",{children:"Sign Up"}),this.renderError(),Object(p.jsx)("br",{}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"name:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",value:this.state.name,onChange:this.onChangeName,className:"form-control mb-2 mr-sm-2",placeholder:"Enter name"}),Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"email:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"email",value:this.state.email,onChange:this.onChangeEmail,className:"form-control mb-2 mr-sm-2",placeholder:"Enter email"}),Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"password:"}),Object(p.jsx)("input",{type:"password",value:this.state.password,onChange:this.onChangePassword,className:"form-control mb-2 mr-sm-2",placeholder:"Enter password"}),Object(p.jsx)("button",{type:"submit",className:"btn btn-outline-danger mb-2",children:"Sign Up"})]})})]})}}]),n}(s.a.Component),C=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),a=e.call(this,t),localStorage.getItem("token")||a.props.history.push("/login"),a.onChangeTitle=a.onChangeTitle.bind(Object(m.a)(a)),a.onChangeContent=a.onChangeContent.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.state={title:"",content:"",error:""},a}return Object(i.a)(n,[{key:"onChangeTitle",value:function(t){this.setState({title:t.target.value,error:""})}},{key:"onChangeContent",value:function(t){this.setState({content:t.target.value,error:""})}},{key:"onSubmit",value:function(t){var e=this;t.preventDefault();var n={title:this.state.title,content:this.state.content};d.a.post("/api/posts",n).then((function(t){e.props.history.push("/")})).catch((function(t){e.setState({error:t.response.data.message})}))}},{key:"renderError",value:function(){return this.state.error?Object(p.jsx)("blockquote",{children:this.state.error}):""}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:" container text-center  pt-2 ",children:[Object(p.jsx)("h4",{children:"create a blog"}),this.renderError(),Object(p.jsx)("br",{}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"title"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",value:this.state.title,onChange:this.onChangeTitle,className:"form-control mb-2 mr-sm-2",placeholder:"title"}),Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"content"}),Object(p.jsx)("textarea",{value:this.state.content,onChange:this.onChangeContent,className:"form-control mb-2 mr-sm-2",placeholder:"write some content"}),Object(p.jsx)("button",{type:"submit",className:"btn btn-outline-danger mb-2",children:"create"})]})})]})}}]),n}(s.a.Component),k=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).deletePost=a.deletePost.bind(Object(m.a)(a)),a.onChangeComment=a.onChangeComment.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.state={post:{},comment:"",commentError:"",error:""},a}return Object(i.a)(n,[{key:"onChangeComment",value:function(t){this.setState({comment:t.target.value,commentError:""})}},{key:"onSubmit",value:function(t){var e=this;t.preventDefault();var n={content:this.state.comment};d.a.post("/api/comments/"+this.props.match.params.id,n).then((function(t){var n=e.state.post;n.comments.push({_id:t.data._id,content:t.data.content,author:{_id:localStorage.getItem("_id")}}),e.setState({post:n,commentError:"",comment:""})})).catch((function(t){e.setState({commentError:Object(p.jsx)("blockquote",{children:t.response.data.message})})}))}},{key:"deletePost",value:function(){var t=this;d.a.delete("/api/posts/"+this.state.post._id).then((function(e){t.props.history.push("/")}))}},{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.id;d.a.get("/api/posts/"+e).then((function(e){t.setState({post:e.data,error:""})})).catch((function(e){t.setState({error:e.response.data.message})}))}},{key:"renderActions",value:function(){if(localStorage.getItem("token")&&localStorage.getItem("_id")===this.state.post.author._id)return Object(p.jsxs)("span",{children:[Object(p.jsx)(j.b,{to:"/post/edit/"+this.state.post._id,children:Object(p.jsx)("button",{className:"btn btn-outline-danger mb-2 ml-2",children:"edit"})}),Object(p.jsx)("button",{className:"btn btn-outline-danger mb-2 ml-2",onClick:this.deletePost,children:"delete"})]})}},{key:"renderComments",value:function(){var t=Object(p.jsx)("p",{children:"no comments yet!"});return this.state.post.comments.length&&(t=this.state.post.comments.map((function(t){return Object(p.jsxs)("p",{children:[Object(p.jsx)("strong",{className:"text-muted",children:t.author._id===localStorage.getItem("_id")?"me":t.author.name}),Object(p.jsx)("br",{}),t.content]},t._id)}))),t}},{key:"renderCommentForm",value:function(){return localStorage.getItem("token")?Object(p.jsxs)("div",{children:[Object(p.jsx)("h6",{children:"add comment"}),this.state.commentError,Object(p.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(p.jsx)("textarea",{value:this.state.comment,onChange:this.onChangeComment,className:"form-control mb-2 mr-sm-2"}),Object(p.jsx)("input",{className:"btn btn-outline-danger mb-2 ml-2",type:"submit",value:"add"})]})]}):Object(p.jsx)("p",{children:"please login so we can add your comment"})}},{key:"render",value:function(){return this.state.error?Object(p.jsx)("div",{className:"container text-center",children:Object(p.jsx)("h4",{children:this.state.error})}):this.state.post.title?Object(p.jsx)("div",{className:"container pt-4",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col",children:[Object(p.jsx)("h4",{children:this.state.post.title}),Object(p.jsx)("h6",{className:"title",children:this.state.post.author.name}),Object(p.jsx)("p",{children:this.state.post.content}),this.renderActions(),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"comments"}),this.renderComments(),this.renderCommentForm()]})})}):Object(p.jsx)("div",{className:"container text-center",children:Object(p.jsx)("h1",{children:"..."})})}}]),n}(s.a.Component),N=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),a=e.call(this,t),localStorage.getItem("token")||a.props.history.push("/login"),a.onChangeTitle=a.onChangeTitle.bind(Object(m.a)(a)),a.onChangeContent=a.onChangeContent.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.state={title:"",content:"",authorId:"",isLoading:!0,error:""},a}return Object(i.a)(n,[{key:"onChangeTitle",value:function(t){this.setState({title:t.target.value,error:""})}},{key:"onChangeContent",value:function(t){this.setState({content:t.target.value,error:""})}},{key:"onSubmit",value:function(t){var e=this;t.preventDefault();var n={title:this.state.title,content:this.state.content};d.a.put("/api/posts/"+this.props.match.params.id,n).then((function(t){e.props.history.push("/")})).catch((function(t){e.setState({error:t.response.data.message})}))}},{key:"componentDidMount",value:function(){var t=this;d.a.get("/api/posts/"+this.props.match.params.id).then((function(e){t.setState({title:e.data.title,content:e.data.content,authorId:e.data.author._id,isLoading:!1})}))}},{key:"renderError",value:function(){return this.state.error?Object(p.jsx)("blockquote",{children:this.state.error}):""}},{key:"render",value:function(){return this.state.isLoading?Object(p.jsx)("div",{className:"container text-center",children:Object(p.jsx)("h1",{children:"..."})}):Object(p.jsxs)("div",{className:" container text-center  pt-2 ",children:[Object(p.jsx)("h4",{children:"editing blog"}),this.renderError(),Object(p.jsx)("br",{}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"title"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",value:this.state.title,onChange:this.onChangeTitle,className:"form-control mb-2 mr-sm-2",placeholder:"title"}),Object(p.jsx)("label",{className:"mb-2 mr-sm-2",children:"content"}),Object(p.jsx)("textarea",{value:this.state.content,onChange:this.onChangeContent,className:"form-control mb-2 mr-sm-2",placeholder:"write some content"}),Object(p.jsx)("button",{type:"submit",className:"btn btn-outline-danger mb-2",children:"edit"})]})})]})}}]),n}(s.a.Component),S=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;Object(c.a)(this,n),a=e.call(this,t);var s=localStorage.getItem("token");return d.a.defaults.headers.common={Authorization:s},a}return Object(i.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)(j.a,{children:[Object(p.jsx)(v,{}),Object(p.jsx)("div",{children:Object(p.jsxs)(u.c,{children:[Object(p.jsx)(u.a,{exact:!0,path:"/",component:g}),Object(p.jsx)(u.a,{path:"/login",component:x}),Object(p.jsx)(u.a,{path:"/signup",component:f}),Object(p.jsx)(u.a,{path:"/post/create",component:C}),Object(p.jsx)(u.a,{path:"/post/view/:id",component:k}),Object(p.jsx)(u.a,{path:"/post/edit/:id",component:N})]})})]})})}}]),n}(a.Component),y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),s(t),r(t),o(t)}))};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(S,{})}),document.getElementById("root")),y()}},[[62,1,2]]]);
//# sourceMappingURL=main.0efe8ca6.chunk.js.map